<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar Test</title>
    <link rel="stylesheet" href="navbar.css">
    <style>
        body {
            margin: 0;
            padding-top: 4em;
            font-family: Arial, sans-serif;
        }
        .test-content {
            padding: 2em;
            max-width: 800px;
            margin: 0 auto;
        }
        .debug-info {
            background: #f5f5f5;
            padding: 1em;
            border-radius: 4px;
            margin: 1em 0;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <script src="navbar.js"></script>
    
    <div class="test-content">
        <h1>Navbar Test Page</h1>
        <p>This page is for testing the shared navbar functionality.</p>
        
        <div class="debug-info">
            <h3>Debug Information:</h3>
            <p><strong>Current URL:</strong> <span id="current-url"></span></p>
            <p><strong>Pathname:</strong> <span id="pathname"></span></p>
            <p><strong>Path Segments:</strong> <span id="path-segments"></span></p>
            <p><strong>Is Root:</strong> <span id="is-root"></span></p>
            <p><strong>Is Blog:</strong> <span id="is-blog"></span></p>
            <p><strong>Blog Type:</strong> <span id="blog-type"></span></p>
            <p><strong>Root Path:</strong> <span id="root-path"></span></p>
            <p><strong>Navbar Status:</strong> <span id="navbar-status">Loading...</span></p>
        </div>
        
        <h2>Test Instructions:</h2>
        <ol>
            <li>Check if the navbar appears at the top of the page</li>
            <li>Verify all navigation links work correctly</li>
            <li>Check the console for any error messages</li>
            <li>Test from different directories (root, blogs/home/, etc.)</li>
        </ol>
    </div>

    <script>
        // Display debug information
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('pathname').textContent = window.location.pathname;
        
        const segments = window.location.pathname.split('/').filter(segment => segment !== '');
        document.getElementById('path-segments').textContent = JSON.stringify(segments);
        
        const isRoot = segments.length === 0 || (segments.length === 1 && segments[0].endsWith('.html'));
        const isBlog = segments.includes('blogs');
        const blogType = isBlog ? segments[segments.indexOf('blogs') + 1] : null;
        
        document.getElementById('is-root').textContent = isRoot;
        document.getElementById('is-blog').textContent = isBlog;
        document.getElementById('blog-type').textContent = blogType || 'N/A';
        
        // Check navbar loading status
        setTimeout(() => {
            const navbar = document.querySelector('.navbar');
            const statusElement = document.getElementById('navbar-status');
            
            if (navbar) {
                statusElement.textContent = 'Navbar loaded successfully ✓';
                statusElement.style.color = 'green';
            } else {
                statusElement.textContent = 'Navbar failed to load ✗';
                statusElement.style.color = 'red';
            }
        }, 1000);
        
        // Log navbar instance info and update debug display
        setTimeout(() => {
            if (window.gaussNavbar) {
                console.log('GaussNavbar instance:', window.gaussNavbar);
                console.log('Current path info:', window.gaussNavbar.currentPath);
                console.log('Root path:', window.gaussNavbar.rootPath);
                
                // Update debug display
                document.getElementById('root-path').textContent = window.gaussNavbar.rootPath;
                
                // Test all navbar links
                const navLinks = document.querySelectorAll('.nav-links a');
                console.log('Navbar links found:', navLinks.length);
                navLinks.forEach((link, index) => {
                    console.log(`Link ${index}:`, {
                        text: link.textContent,
                        href: link.getAttribute('href'),
                        fullUrl: link.href
                    });
                });
            } else {
                console.log('GaussNavbar instance not found');
                document.getElementById('root-path').textContent = 'Not available';
            }
        }, 1500);
    </script>
</body>
</html>
